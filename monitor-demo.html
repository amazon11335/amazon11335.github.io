<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®æ—¶ç›‘æ§æ¼”ç¤º</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/realtime-alerts.css">
</head>
<body>
    <div class="container">
        <h1>ğŸ›¡ï¸ å®æ—¶ç›‘æ§ç³»ç»Ÿæ¼”ç¤º</h1>
        
        <div class="card">
            <h3>ç›‘æ§æ§åˆ¶</h3>
            <button class="btn btn-success" onclick="startDemo()">å¯åŠ¨ç›‘æ§æ¼”ç¤º</button>
            <button class="btn btn-danger" onclick="stopDemo()">åœæ­¢ç›‘æ§</button>
            <button class="btn btn-info" onclick="showStats()">æŸ¥çœ‹ç»Ÿè®¡</button>
        </div>

        <div class="card">
            <h3>æµ‹è¯•è¾“å…¥æ¡†</h3>
            <p>åœ¨ä¸‹é¢çš„è¾“å…¥æ¡†ä¸­è¾“å…¥åŒ…å«è¯ˆéª—å…³é”®è¯çš„å†…å®¹æ¥æµ‹è¯•å®æ—¶ç›‘æ§ï¼š</p>
            <textarea id="testInput" placeholder="å°è¯•è¾“å…¥ï¼šå¤§å¸ˆç®—å‘½è½¬è¿ã€æŠ•èµ„ç†è´¢ç¨³èµšã€ç´§æ€¥è½¬è´¦ç­‰..." rows="3"></textarea>
            <input type="text" id="testInput2" placeholder="æˆ–è€…åœ¨è¿™é‡Œè¾“å…¥æµ‹è¯•å†…å®¹...">
        </div>

        <div class="card">
            <h3>æµ‹è¯•æŒ‰é’®</h3>
            <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æ¨¡æ‹Ÿä¸åŒé£é™©ç­‰çº§çš„å†…å®¹ï¼š</p>
            <button class="btn btn-outline" onclick="simulateHighRisk()">æ¨¡æ‹Ÿé«˜é£é™©å†…å®¹</button>
            <button class="btn btn-outline" onclick="simulateMediumRisk()">æ¨¡æ‹Ÿä¸­ç­‰é£é™©å†…å®¹</button>
            <button class="btn btn-outline" onclick="simulateClipboard()">æ¨¡æ‹Ÿå‰ªè´´æ¿æ£€æµ‹</button>
        </div>

        <div class="card">
            <h3>åŠ¨æ€å†…å®¹æµ‹è¯•</h3>
            <button class="btn btn-primary" onclick="addSuspiciousContent()">æ·»åŠ å¯ç–‘å†…å®¹</button>
            <button class="btn btn-primary" onclick="addNormalContent()">æ·»åŠ æ­£å¸¸å†…å®¹</button>
            <div id="dynamicContent"></div>
        </div>

        <div class="card">
            <h3>ç›‘æ§æ—¥å¿—</h3>
            <div id="monitorLogs" style="height: 200px; overflow-y: auto; background: #f8f9fa; padding: 10px; border-radius: 5px;">
                <p>ç›‘æ§æ—¥å¿—å°†åœ¨è¿™é‡Œæ˜¾ç¤º...</p>
            </div>
            <button class="btn btn-outline" onclick="clearLogs()">æ¸…ç©ºæ—¥å¿—</button>
        </div>
    </div>

    <script src="js/keywords-database.js"></script>
    <script src="js/risk-algorithm.js"></script>
    <script src="js/ai-integration.js"></script>
    <script src="js/data-storage.js"></script>
    <script src="js/realtime-monitor.js"></script>
    <script src="js/components.js"></script>

    <script>
        let demoActive = false;

        function startDemo() {
            if (demoActive) return;
            
            demoActive = true;
            realtimeMonitor.startMonitoring({
                sensitivity: 'high',
                autoBlock: false,
                soundAlert: true,
                visualAlert: true,
                logActivity: true
            });

            // å¼€å§‹æ—¥å¿—æ›´æ–°
            updateLogs();
            setInterval(updateLogs, 2000);
        }

        function stopDemo() {
            demoActive = false;
            realtimeMonitor.stopMonitoring();
        }

        function showStats() {
            const stats = realtimeMonitor.getStats();
            const content = `
                <h4>ç›‘æ§ç»Ÿè®¡ä¿¡æ¯</h4>
                <p><strong>ç›‘æ§çŠ¶æ€:</strong> ${stats.isActive ? 'è¿è¡Œä¸­' : 'å·²åœæ­¢'}</p>
                <p><strong>è­¦æŠ¥æ•°é‡:</strong> ${stats.alertCount}</p>
                <h5>ç›‘æ§å™¨çŠ¶æ€:</h5>
                <ul>
                    ${stats.monitors.map(m => `<li>${m.name}: ${m.active ? 'âœ… æ´»è·ƒ' : 'âŒ åœæ­¢'}</li>`).join('')}
                </ul>
                <h5>è®¾ç½®:</h5>
                <ul>
                    <li>æ•æ„Ÿåº¦: ${stats.settings.sensitivity}</li>
                    <li>è‡ªåŠ¨é˜»æ–­: ${stats.settings.autoBlock ? 'å¼€å¯' : 'å…³é—­'}</li>
                    <li>å£°éŸ³è­¦æŠ¥: ${stats.settings.soundAlert ? 'å¼€å¯' : 'å…³é—­'}</li>
                    <li>è§†è§‰è­¦æŠ¥: ${stats.settings.visualAlert ? 'å¼€å¯' : 'å…³é—­'}</li>
                </ul>
            `;
            
            UIComponents.showModal('ç›‘æ§ç»Ÿè®¡', content);
        }

        function simulateHighRisk() {
            const testContent = "å¤§å¸ˆå…è´¹ç®—å‘½ï¼Œè½¬è¿æ”¹å‘½åªéœ€998å…ƒï¼Œä¿è¯å‡†ç¡®ç‡99%ï¼Œç«‹å³è½¬è´¦åˆ°æŒ‡å®šè´¦æˆ·";
            realtimeMonitor.analyzeContent(testContent, 'simulation');
        }

        function simulateMediumRisk() {
            const testContent = "æŠ•èµ„ç†è´¢é¡¹ç›®ï¼Œæœˆæ”¶ç›Š15%ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥äº†è§£ä¸€ä¸‹";
            realtimeMonitor.analyzeContent(testContent, 'simulation');
        }

        function simulateClipboard() {
            // æ¨¡æ‹Ÿå‰ªè´´æ¿å†…å®¹æ£€æµ‹
            const testContent = "ç´§æ€¥é€šçŸ¥ï¼šæ‚¨çš„é“¶è¡Œå¡å­˜åœ¨é£é™©ï¼Œè¯·ç«‹å³è”ç³»å®¢æœéªŒè¯èº«ä»½ä¿¡æ¯";
            realtimeMonitor.analyzeContent(testContent, 'clipboard');
        }

        function addSuspiciousContent() {
            const suspiciousTexts = [
                "ğŸ”® å åœå¤§å¸ˆåœ¨çº¿ç®—å‘½ï¼Œå‡†ç¡®ç‡99%",
                "ğŸ’° æŠ•èµ„ç†è´¢ï¼Œæ—¥èµšåƒå…ƒä¸æ˜¯æ¢¦",
                "ğŸš¨ æ‚¨çš„è´¦æˆ·å­˜åœ¨å¼‚å¸¸ï¼Œè¯·ç«‹å³éªŒè¯",
                "ğŸ’• å¯‚å¯å•èº«ï¼Ÿæ‰¾çœŸçˆ±å°±åœ¨è¿™é‡Œ",
                "ğŸ æ­å–œä¸­å¥–ï¼è¯·æ”¯ä»˜æ‰‹ç»­è´¹é¢†å–å¥–é‡‘"
            ];
            
            const randomText = suspiciousTexts[Math.floor(Math.random() * suspiciousTexts.length)];
            const div = document.createElement('div');
            div.textContent = randomText;
            div.style.cssText = 'margin: 10px 0; padding: 10px; background: #fff3cd; border-radius: 5px;';
            document.getElementById('dynamicContent').appendChild(div);
        }

        function addNormalContent() {
            const normalTexts = [
                "ä»Šå¤©å¤©æ°”ä¸é”™ï¼Œé€‚åˆå‡ºé—¨æ•£æ­¥",
                "å­¦ä¹ æ–°æŠ€èƒ½ï¼Œæå‡è‡ªå·±çš„èƒ½åŠ›",
                "å¥åº·é¥®é£Ÿï¼Œè§„å¾‹ä½œæ¯å¾ˆé‡è¦",
                "å’Œæœ‹å‹èŠå¤©ï¼Œåˆ†äº«ç”Ÿæ´»ç‚¹æ»´",
                "é˜…è¯»å¥½ä¹¦ï¼Œä¸°å¯Œç²¾ç¥ä¸–ç•Œ"
            ];
            
            const randomText = normalTexts[Math.floor(Math.random() * normalTexts.length)];
            const div = document.createElement('div');
            div.textContent = randomText;
            div.style.cssText = 'margin: 10px 0; padding: 10px; background: #d4edda; border-radius: 5px;';
            document.getElementById('dynamicContent').appendChild(div);
        }

        function updateLogs() {
            if (!demoActive) return;
            
            const logs = JSON.parse(localStorage.getItem('monitorLogs') || '[]');
            const logsContainer = document.getElementById('monitorLogs');
            
            if (logs.length > 0) {
                logsContainer.innerHTML = logs.slice(0, 10).map(log => 
                    `<div style="margin: 5px 0; font-size: 12px;">
                        <span style="color: #666;">[${new Date(log.timestamp).toLocaleTimeString()}]</span>
                        ${log.message}
                    </div>`
                ).join('');
            }
        }

        function clearLogs() {
            localStorage.removeItem('monitorLogs');
            document.getElementById('monitorLogs').innerHTML = '<p>ç›‘æ§æ—¥å¿—å·²æ¸…ç©º</p>';
        }

        // é¡µé¢åŠ è½½æ—¶çš„æç¤º
        window.addEventListener('load', function() {
            setTimeout(() => {
                alert('æ¬¢è¿ä½¿ç”¨å®æ—¶ç›‘æ§æ¼”ç¤ºï¼\n\n1. ç‚¹å‡»"å¯åŠ¨ç›‘æ§æ¼”ç¤º"å¼€å§‹\n2. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥åŒ…å«è¯ˆéª—å…³é”®è¯çš„å†…å®¹\n3. è§‚å¯Ÿå®æ—¶è­¦æŠ¥å’Œç›‘æ§é¢æ¿\n4. å°è¯•ä¸åŒçš„æµ‹è¯•æŒ‰é’®');
            }, 1000);
        });
    </script>
</body>
</html>